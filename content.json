{"meta":{"title":"SherryWu的博客","subtitle":"你可以什么都听，但不能什么都信","description":"一个善良的人","author":"SherryWu","url":"//biubi.cn"},"pages":[],"posts":[{"title":"微信小程序搜索关键词高亮","slug":"highlight","date":"2018-07-10T05:43:41.000Z","updated":"2018-07-10T07:27:43.443Z","comments":true,"path":"2018/07/10/highlight/","link":"","permalink":"//biubi.cn/2018/07/10/highlight/","excerpt":"","text":"如有转载，请注明出处。 说明代码实现把高亮部分的代码写在模板中（template），以便在不同地方都可以调用 template：12345&lt;template name=\"highlight\"&gt; &lt;block wx:for=\"&#123;&#123;util.formatSearchRes(str, key)&#125;&#125;\" wx:for-item=\"h\" wx:for-index=\"hIdx\" wx:key=\"&#123;&#123;hIdx&#125;&#125;\"&gt; &lt;text class=\"&#123;&#123;h == util.trim(key) ? 'highlight' : '' &#125;&#125;\"&gt;&#123;&#123;h&#125;&#125;&lt;/text&gt; &lt;/block&gt;&lt;/template&gt; wxs: (util.formatSearchRes)12345var formatSearchRes = function (str, key) &#123; var keyWord = ''; if (key) keyWord = trim(key); // 去除首尾空格 return keyWord ? str.replace(getRegExp(keyWord, 'g'), '%%' + keyWord + '%%').split('%%') : str;&#125; 在搜索结果页面调用模板：123&lt;import src=\"../template/highlight.wxml\" /&gt;&lt;!--str为需要对比的字符串；key为搜索关键词（例如：战争世界）--&gt;&lt;template is='highlight' data=\"&#123;&#123;str:ar.name, key: searchValue &#125;&#125;\" /&gt; 效果预览","categories":[],"tags":[{"name":"微信小程序","slug":"微信小程序","permalink":"//biubi.cn/tags/微信小程序/"},{"name":"高亮","slug":"高亮","permalink":"//biubi.cn/tags/高亮/"}]}]}